\hypertarget{_gravity_t_d_s_8h_source}{}\doxysection{Gravity\+TDS.\+h}
\label{_gravity_t_d_s_8h_source}\index{lib/GravityTDS/GravityTDS.h@{lib/GravityTDS/GravityTDS.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/***************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{ DFRobot Gravity: Analog TDS Sensor/Meter}}
\DoxyCodeLine{3 \textcolor{comment}{ <https://www.dfrobot.com/wiki/index.php/Gravity:\_Analog\_TDS\_Sensor\_/\_Meter\_For\_Arduino\_SKU:\_SEN0244>}}
\DoxyCodeLine{4 \textcolor{comment}{ }}
\DoxyCodeLine{5 \textcolor{comment}{ ***************************************************}}
\DoxyCodeLine{6 \textcolor{comment}{ This sample code shows how to read the tds value and calibrate it with the standard buffer solution.}}
\DoxyCodeLine{7 \textcolor{comment}{ 707ppm(1413us/cm)@25\string^c standard buffer solution is recommended.}}
\DoxyCodeLine{8 \textcolor{comment}{ }}
\DoxyCodeLine{9 \textcolor{comment}{ Created 2018-\/1-\/3}}
\DoxyCodeLine{10 \textcolor{comment}{ By Jason <jason.ling@dfrobot.com@dfrobot.com>}}
\DoxyCodeLine{11 \textcolor{comment}{ }}
\DoxyCodeLine{12 \textcolor{comment}{ GNU Lesser General Public License.}}
\DoxyCodeLine{13 \textcolor{comment}{ See <http://www.gnu.org/licenses/> for details.}}
\DoxyCodeLine{14 \textcolor{comment}{ All above must be included in any redistribution.}}
\DoxyCodeLine{15 \textcolor{comment}{ ****************************************************/}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef GRAVITY\_TDS\_H}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define GRAVITY\_TDS\_H}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}Arduino.h"{}}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define ReceivedBufferLength 15}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define TdsFactor 0.5  }\textcolor{comment}{// tds = ec / 2}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{class }\mbox{\hyperlink{class_gravity_t_d_s}{GravityTDS}}}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27 \textcolor{keyword}{public}:}
\DoxyCodeLine{28     \mbox{\hyperlink{class_gravity_t_d_s}{GravityTDS}}();}
\DoxyCodeLine{29     \mbox{\hyperlink{class_gravity_t_d_s}{\string~GravityTDS}}();}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{keywordtype}{void} begin();  \textcolor{comment}{//initialization}}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} update(); \textcolor{comment}{//read and calculate}}
\DoxyCodeLine{33     \textcolor{keywordtype}{void} setPin(\textcolor{keywordtype}{int} pin); }
\DoxyCodeLine{34     \textcolor{keywordtype}{void} setTemperature(\textcolor{keywordtype}{float} temp);  \textcolor{comment}{//set the temperature and execute temperature compensation}}
\DoxyCodeLine{35     \textcolor{keywordtype}{void} setAref(\textcolor{keywordtype}{float} value);  \textcolor{comment}{//reference voltage on ADC, default 5.0V on Arduino UNO}}
\DoxyCodeLine{36     \textcolor{keywordtype}{void} setAdcRange(\textcolor{keywordtype}{float} range);  \textcolor{comment}{//1024 for 10bit ADC;4096 for 12bit ADC}}
\DoxyCodeLine{37     \textcolor{keywordtype}{void} setKvalueAddress(\textcolor{keywordtype}{int} address); \textcolor{comment}{//set the EEPROM address to store the k value,default address:0x08}}
\DoxyCodeLine{38     \textcolor{keywordtype}{float} getKvalue(); }
\DoxyCodeLine{39     \textcolor{keywordtype}{float} getTdsValue();}
\DoxyCodeLine{40     \textcolor{keywordtype}{float} getEcValue();}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{private}:}
\DoxyCodeLine{43     \textcolor{keywordtype}{int} pin;}
\DoxyCodeLine{44     \textcolor{keywordtype}{float} aref;  \textcolor{comment}{// default 5.0V on Arduino UNO}}
\DoxyCodeLine{45     \textcolor{keywordtype}{float} adcRange;}
\DoxyCodeLine{46     \textcolor{keywordtype}{float} temperature;}
\DoxyCodeLine{47     \textcolor{keywordtype}{int} kValueAddress;     \textcolor{comment}{//the address of the K value stored in the EEPROM}}
\DoxyCodeLine{48     \textcolor{keywordtype}{char} cmdReceivedBuffer[ReceivedBufferLength+1];   \textcolor{comment}{// store the serial cmd from the serial monitor}}
\DoxyCodeLine{49     \textcolor{keywordtype}{byte} cmdReceivedBufferIndex;}
\DoxyCodeLine{50  }
\DoxyCodeLine{51     \textcolor{keywordtype}{float} kValue;      \textcolor{comment}{// k value of the probe,you can calibrate in buffer solution ,such as 706.5ppm(1413us/cm)@25\string^C }}
\DoxyCodeLine{52     \textcolor{keywordtype}{float} analogValue;}
\DoxyCodeLine{53     \textcolor{keywordtype}{float} voltage;}
\DoxyCodeLine{54     \textcolor{keywordtype}{float} ecValue; \textcolor{comment}{//before temperature compensation}}
\DoxyCodeLine{55     \textcolor{keywordtype}{float} ecValue25; \textcolor{comment}{//after temperature compensation}}
\DoxyCodeLine{56     \textcolor{keywordtype}{float} tdsValue;}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keywordtype}{void} readKValues();}
\DoxyCodeLine{59     \textcolor{keywordtype}{boolean} cmdSerialDataAvailable();}
\DoxyCodeLine{60     \textcolor{keywordtype}{byte} cmdParse();}
\DoxyCodeLine{61     \textcolor{keywordtype}{void} ecCalibration(\textcolor{keywordtype}{byte} mode);}
\DoxyCodeLine{62 \};  }
\DoxyCodeLine{63 }
\DoxyCodeLine{64 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
