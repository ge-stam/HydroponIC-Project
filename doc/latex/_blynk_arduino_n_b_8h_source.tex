\hypertarget{_blynk_arduino_n_b_8h_source}{}\doxysection{Blynk\+Arduino\+NB.\+h}
\label{_blynk_arduino_n_b_8h_source}\index{lib/Blynk/src/Adapters/BlynkArduinoNB.h@{lib/Blynk/src/Adapters/BlynkArduinoNB.h}}
\mbox{\hyperlink{_blynk_arduino_n_b_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#ifndef BlynkArduinoNB\_h}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#define BlynkArduinoNB\_h}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#ifndef BLYNK\_INFO\_CONNECTION}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#define BLYNK\_INFO\_CONNECTION  "{}MKRNB"{}}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef BLYNK\_HEARTBEAT}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define BLYNK\_HEARTBEAT 60}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#ifndef BLYNK\_TIMEOUT\_MS}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define BLYNK\_TIMEOUT\_MS 6000}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define BLYNK\_SEND\_ATOMIC}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_blynk_api_arduino_8h}{BlynkApiArduino.h}}>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_blynk_protocol_8h}{Blynk/BlynkProtocol.h}}>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include <Adapters/BlynkArduinoClient.h>}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <MKRNB.h>}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{keyword}{class }\mbox{\hyperlink{class_blynk_s_i_m}{BlynkSIM}}}
\DoxyCodeLine{33     : \textcolor{keyword}{public} \mbox{\hyperlink{class_blynk_protocol}{BlynkProtocol}}<BlynkArduinoClient>}
\DoxyCodeLine{34 \{}
\DoxyCodeLine{35     \textcolor{keyword}{typedef} \mbox{\hyperlink{class_blynk_protocol}{BlynkProtocol<BlynkArduinoClient>}} Base;}
\DoxyCodeLine{36 \textcolor{keyword}{public}:}
\DoxyCodeLine{37     \mbox{\hyperlink{class_blynk_s_i_m}{BlynkSIM}}(\mbox{\hyperlink{class_blynk_arduino_client_gen}{BlynkArduinoClient}}\& transp)}
\DoxyCodeLine{38         : Base(transp)}
\DoxyCodeLine{39     \{\}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{keywordtype}{bool} connectNetwork(NB\& modem, GPRS\& gprs, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* pin)}
\DoxyCodeLine{42     \{}
\DoxyCodeLine{43         BLYNK\_LOG1(BLYNK\_F(\textcolor{stringliteral}{"{}Modem init..."{}}));}
\DoxyCodeLine{44         \textcolor{keywordflow}{if} (!modem.begin(pin)) \{}
\DoxyCodeLine{45            BLYNK\_FATAL(BLYNK\_F(\textcolor{stringliteral}{"{}Cannot init"{}}));}
\DoxyCodeLine{46            \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{47         \}}
\DoxyCodeLine{48 }
\DoxyCodeLine{49         BLYNK\_LOG3(BLYNK\_F(\textcolor{stringliteral}{"{}Connecting to "{}}),\textcolor{stringliteral}{"{}"{}}, BLYNK\_F(\textcolor{stringliteral}{"{} ..."{}}));}
\DoxyCodeLine{50         \textcolor{keywordflow}{if} (!gprs.attachGPRS()) \{}
\DoxyCodeLine{51             BLYNK\_FATAL(BLYNK\_F(\textcolor{stringliteral}{"{}Connect GPRS failed"{}}));}
\DoxyCodeLine{52             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{53         \}}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         BLYNK\_LOG1(BLYNK\_F(\textcolor{stringliteral}{"{}Connected to GPRS"{}}));}
\DoxyCodeLine{56         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keywordtype}{void} config(NB\&        nb,}
\DoxyCodeLine{60                 GPRS\&       gprs,}
\DoxyCodeLine{61                 NBClient\&  nbclient,}
\DoxyCodeLine{62                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* auth,}
\DoxyCodeLine{63                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* domain = BLYNK\_DEFAULT\_DOMAIN,}
\DoxyCodeLine{64                 uint16\_t    port   = BLYNK\_DEFAULT\_PORT)}
\DoxyCodeLine{65     \{}
\DoxyCodeLine{66         Base::begin(auth);}
\DoxyCodeLine{67         modem = \&nb;}
\DoxyCodeLine{68         modemGPRS = \&gprs;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70         this-\/>conn.setClient(\&nbclient);}
\DoxyCodeLine{71         this-\/>conn.begin(domain, port);}
\DoxyCodeLine{72     \}}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{keywordtype}{void} begin(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* auth,}
\DoxyCodeLine{75                NB\&        nb,}
\DoxyCodeLine{76                GPRS\&       gprs,}
\DoxyCodeLine{77                NBClient\&  nbclient,}
\DoxyCodeLine{78                \textcolor{keyword}{const} \textcolor{keywordtype}{char}* pin,}
\DoxyCodeLine{79                \textcolor{keyword}{const} \textcolor{keywordtype}{char}* domain = BLYNK\_DEFAULT\_DOMAIN,}
\DoxyCodeLine{80                uint16\_t    port   = BLYNK\_DEFAULT\_PORT)}
\DoxyCodeLine{81     \{}
\DoxyCodeLine{82         config(nb, gprs, nbclient, auth, domain, port);}
\DoxyCodeLine{83         connectNetwork(nb, gprs, pin);}
\DoxyCodeLine{84         \textcolor{keywordflow}{while}(this-\/>connect() != \textcolor{keyword}{true}) \{\}}
\DoxyCodeLine{85     \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 \textcolor{keyword}{private}:}
\DoxyCodeLine{88     NB*       modem;}
\DoxyCodeLine{89     GPRS*     modemGPRS;}
\DoxyCodeLine{90     NBClient* nbclient;}
\DoxyCodeLine{91 \};}
\DoxyCodeLine{92 }
\DoxyCodeLine{93 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
