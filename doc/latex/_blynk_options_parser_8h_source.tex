\hypertarget{_blynk_options_parser_8h_source}{}\doxysection{Blynk\+Options\+Parser.\+h}
\label{_blynk_options_parser_8h_source}\index{lib/Blynk/linux/BlynkOptionsParser.h@{lib/Blynk/linux/BlynkOptionsParser.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <getopt.h>}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_blynk_debug_8h}{Blynk/BlynkDebug.h}}>}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{keyword}{static}}
\DoxyCodeLine{6 \textcolor{keywordtype}{void} parse\_options(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}* argv[],}
\DoxyCodeLine{7                    \textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& auth,}
\DoxyCodeLine{8                    \textcolor{keyword}{const} \textcolor{keywordtype}{char}*\& serv,}
\DoxyCodeLine{9                    uint16\_t\&    port)}
\DoxyCodeLine{10 \{}
\DoxyCodeLine{11     \textcolor{keyword}{static} \textcolor{keyword}{struct }option long\_options[] = \{}
\DoxyCodeLine{12         \{\textcolor{stringliteral}{"{}token"{}},   required\_argument,   0, \textcolor{charliteral}{'t'}\},}
\DoxyCodeLine{13         \{\textcolor{stringliteral}{"{}server"{}},  required\_argument,   0, \textcolor{charliteral}{'s'}\},}
\DoxyCodeLine{14         \{\textcolor{stringliteral}{"{}port"{}},    required\_argument,   0, \textcolor{charliteral}{'p'}\},}
\DoxyCodeLine{15         \{0, 0, 0, 0\}}
\DoxyCodeLine{16     \};}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     \textcolor{comment}{// Set default values}}
\DoxyCodeLine{19     auth = NULL;}
\DoxyCodeLine{20     serv = BLYNK\_DEFAULT\_DOMAIN;}
\DoxyCodeLine{21     port = BLYNK\_DEFAULT\_PORT;}
\DoxyCodeLine{22 }
\DoxyCodeLine{23     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* usage =}
\DoxyCodeLine{24         \textcolor{stringliteral}{"{}Usage: blynk [options]\(\backslash\)n"{}}}
\DoxyCodeLine{25         \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{26         \textcolor{stringliteral}{"{}Options:\(\backslash\)n"{}}}
\DoxyCodeLine{27         \textcolor{stringliteral}{"{}  -\/t auth, -\/-\/token=auth    Your auth token\(\backslash\)n"{}}}
\DoxyCodeLine{28         \textcolor{stringliteral}{"{}  -\/s addr, -\/-\/server=addr   Server name (default: "{}} BLYNK\_DEFAULT\_DOMAIN \textcolor{stringliteral}{"{})\(\backslash\)n"{}}}
\DoxyCodeLine{29         \textcolor{stringliteral}{"{}  -\/p num,  -\/-\/port=num      Server port (default: "{}} BLYNK\_TOSTRING(BLYNK\_DEFAULT\_PORT) \textcolor{stringliteral}{"{})\(\backslash\)n"{}}}
\DoxyCodeLine{30         \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \textcolor{keywordtype}{int} rez;}
\DoxyCodeLine{33     \textcolor{keywordflow}{while} (-\/1 != (rez = getopt\_long(argc, argv,\textcolor{stringliteral}{"{}t:s:p:"{}}, long\_options, NULL))) \{}
\DoxyCodeLine{34         \textcolor{keywordflow}{switch} (rez) \{}
\DoxyCodeLine{35         \textcolor{keywordflow}{case} \textcolor{charliteral}{'t'}: auth = optarg; \textcolor{keywordflow}{break};}
\DoxyCodeLine{36         \textcolor{keywordflow}{case} \textcolor{charliteral}{'s'}: serv = optarg; \textcolor{keywordflow}{break};}
\DoxyCodeLine{37         \textcolor{keywordflow}{case} \textcolor{charliteral}{'p'}: port = atoi(optarg); \textcolor{keywordflow}{break};}
\DoxyCodeLine{38         default : printf(usage); exit(1);}
\DoxyCodeLine{39         \};}
\DoxyCodeLine{40     \};}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{comment}{// Check mandatory options}}
\DoxyCodeLine{43     \textcolor{keywordflow}{if} (!auth) \{}
\DoxyCodeLine{44         printf(usage);}
\DoxyCodeLine{45         exit(1);}
\DoxyCodeLine{46     \}}
\DoxyCodeLine{47 \}}

\end{DoxyCode}
